<html>
<head>
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>
    <link rel='stylesheet' href='https://unpkg.com/formiojs@latest/dist/formio.full.min.css'>
    <script src='https://unpkg.com/formiojs@latest/dist/formio.full.min.js'></script>
</head>
<body>
<div id='formio'></div>


<script src='//cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
<script type='text/javascript'>
    window.onload = function() {
        Formio.createForm(document.getElementById('formio'), 'https://llxxwkjswvxxsss.form.io/foodandbeverage', {
            hooks: {
                beforeSubmit: (submission, next) => {
                    // Make a custom ajax call.
                    $.ajax({
                        url: 'https://data.qld.gov.au/api/3/action/datastore_search?resource_id=0ca6f77c-4088-4d77-8c88-beae2b57ce14&limit=5',
                        method: 'POST',
                        data: submission,
                        complete: (errors) => {
                            let submitErrors = null;
                            if (errors) {
                                submitErrors = [];
                                errors.forEach((error) => {
                                    submitErrors.push({
                                        message: error.toString()
                                    });
                                });
                            }
                            next(submitErrors);
                        }
                    });
                }
            }
        })
    };
</script>
<!--<script>-->
<!--    var abn = $('#ABN').val();-->
<!--    var guid = 'e36743bf-bb95-4c44-9a1c-bf50756169e2';-->

<!--    var urlP = "https://abr.business.gov.au/json/AbnDetails.aspx?callback=abnCallback&abn="+ abn +"&guid=" + guid +"";-->
<!--    $('#edku1de input').attr('disabled', 'disabled');-->
<!--    $.ajax({-->
<!--        url: urlP,-->
<!--        dataType: 'jsonp',-->
<!--        jsonpCallback: "abnCallback",-->
<!--        success: function (data) {-->
<!--            if(data.EntityName === ''){-->
<!--                alert('ABN not valid');-->
<!--                $('#edku1de input').val('');-->
<!--            } else {-->
<!--                $('#edku1de input').val(data.EntityName);-->
<!--                //$('#Tradingname').val(data.EntityTypeName);-->
<!--            }-->
<!--        }-->
<!--    });-->
<!--</script>-->
</body>
</html>
